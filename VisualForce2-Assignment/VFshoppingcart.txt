<apex:page controller="shopping" sidebar="false" >
<link href="//netdna.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.css" rel="stylesheet"/>
    <apex:form >
        <apex:panelGroup id="POH">
            <apex:pageBlock title="Purchase Order History" >
                <apex:pageBlockTable value="{!purchaseorderlist}" var="pol" >
                    <apex:column headerValue="Order ID" value="{!pol.id}"/>
                    <apex:column value="{!pol.Total_Amount__c}"/>
                    <apex:column value="{!pol.Order_Status__c}"/>
                </apex:pageBlockTable>
                <apex:commandButton value="Add New Purchase" action="{!cart}" rendered="{!showadd}" reRender="HEY"/>   
            </apex:pageBlock>       
        </apex:panelGroup>
        <apex:panelGroup id="afterPH">
        <apex:pageBlock rendered="{!SAPH}">
            <apex:panelGroup id="HEY">
                <apex:pageBlock title="Products Available" rendered="{!showCart}">
                    <apex:pageBlockTable value="{!productlist}" var="products">
                        <apex:column headerValue="Product Name">
                            <apex:inputCheckbox value="{!products.selected}" />
                            <apex:outputText value="{!products.product.Name}"/>
                        </apex:column>
                        <apex:column value="{!products.product.ProductCode}"/>
                        <apex:column headerValue="Quantity" value="{!products.LQuantity}"/>
                        <apex:column value="{!products.product.Price_Per_Unit__c}"/>
                    </apex:pageBlockTable>
                    <apex:commandButton value="Add To Cart" action="{!addToCart}" reRender="UserCart,HEY"/>
                </apex:pageBlock>
            </apex:panelGroup>
                <apex:panelGroup id="UserCart">
                    <apex:pageBlock title="User Cart"  rendered="{!showUserCart}" id="kam">
                        <apex:pageBlockTable value="{!selectedProductlist}" var="pro">
                            <apex:column value="{!pro.product.Name}"/>
                            <apex:column value="{!pro.product.ProductCode}"/>
                            <apex:column headerValue="Quantity">
                                <apex:inputField value="{!pro.product.Quantity__c}">
                                    <apex:actionSupport event="onchange" action="{!changequant}" reRender="HEY,UserCart"/>
                                </apex:inputField>
                            </apex:column>
                            <apex:column headerValue="Amount" >
                                <apex:outputText value="${!pro.product.Quantity__c * pro.product.Price_Per_Unit__c}"/>
                            </apex:column>
                            <apex:column >
                                <apex:commandLink action="{!deleteProduct}" reRender="UserCart,HEY">
                                    
                                    <i class="fa fa-check fa-lg"></i>
                                    <apex:param name="ProductToDelete" value="{!pro.product.id}" assignTo="{!ProductToDelete}"/>
                                </apex:commandLink>
                            </apex:column>
                        </apex:pageBlockTable>
                        <apex:commandButton value="Checkout" action="{!checkout}" rerender="POH,afterPH"/>
                    </apex:pageBlock>
            </apex:panelGroup>
            </apex:pageBlock>
        </apex:panelGroup>
    </apex:form>
</apex:page>